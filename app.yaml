apiVersion: v1
items:
- apiVersion: networking.istio.io/v1alpha3
  kind: ServiceEntry
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"networking.istio.io/v1alpha3","kind":"ServiceEntry","metadata":{"annotations":{},"name":"allow-egress-googleapis","namespace":"gallery"},"spec":{"hosts":["accounts.google.com","*.googleapis.com"],"ports":[{"name":"http","number":80,"protocol":"HTTP"},{"name":"https","number":443,"protocol":"HTTPS"}]}}
    creationTimestamp: "2024-10-03T04:35:46Z"
    generation: 1
    name: allow-egress-googleapis
    namespace: gallery
    resourceVersion: "367863"
    uid: 7a107dd0-98eb-4a65-b4f1-e05b9e720248
  spec:
    hosts:
    - accounts.google.com
    - '*.googleapis.com'
    ports:
    - name: http
      number: 80
      protocol: HTTP
    - name: https
      number: 443
      protocol: HTTPS
- apiVersion: networking.istio.io/v1alpha3
  kind: ServiceEntry
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"networking.istio.io/v1alpha3","kind":"ServiceEntry","metadata":{"annotations":{},"name":"allow-egress-google-metadata","namespace":"gallery"},"spec":{"addresses":["169.254.169.254"],"hosts":["metadata.google.internal"],"ports":[{"name":"http","number":80,"protocol":"HTTP"},{"name":"https","number":443,"protocol":"HTTPS"}]}}
    creationTimestamp: "2024-10-03T04:35:46Z"
    generation: 1
    name: allow-egress-google-metadata
    namespace: gallery
    resourceVersion: "367865"
    uid: bdeabab4-4c19-4748-b89f-9666c3723fba
  spec:
    addresses:
    - 169.254.169.254
    hosts:
    - metadata.google.internal
    ports:
    - name: http
      number: 80
      protocol: HTTP
    - name: https
      number: 443
      protocol: HTTPS
- apiVersion: networking.istio.io/v1alpha3
  kind: Gateway
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"networking.istio.io/v1alpha3","kind":"Gateway","metadata":{"annotations":{},"name":"frontend-gateway","namespace":"gallery"},"spec":{"selector":{"istio":"ingressgateway"},"servers":[{"hosts":["*"],"port":{"name":"http","number":80,"protocol":"HTTP"}}]}}
    creationTimestamp: "2024-10-03T04:35:47Z"
    generation: 1
    name: frontend-gateway
    namespace: gallery
    resourceVersion: "367866"
    uid: adc709ed-faa1-43ee-9873-ca9803630922
  spec:
    selector:
      istio: ingressgateway
    servers:
    - hosts:
      - '*'
      port:
        name: http
        number: 80
        protocol: HTTP
- apiVersion: networking.istio.io/v1alpha3
  kind: VirtualService
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"networking.istio.io/v1alpha3","kind":"VirtualService","metadata":{"annotations":{},"name":"frontend-ingress","namespace":"gallery"},"spec":{"gateways":["frontend-gateway"],"hosts":["*"],"http":[{"route":[{"destination":{"host":"frontend","port":{"number":80}}}]}]}}
    creationTimestamp: "2024-10-03T04:35:47Z"
    generation: 1
    name: frontend-ingress
    namespace: gallery
    resourceVersion: "367869"
    uid: b6408d19-22cb-4b2b-becd-db5bc728ee12
  spec:
    gateways:
    - frontend-gateway
    hosts:
    - '*'
    http:
    - route:
      - destination:
          host: frontend
          port:
            number: 80
- apiVersion: networking.istio.io/v1alpha3
  kind: VirtualService
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"networking.istio.io/v1alpha3","kind":"VirtualService","metadata":{"annotations":{},"name":"frontend","namespace":"gallery"},"spec":{"hosts":["frontend.default.svc.cluster.local"],"http":[{"route":[{"destination":{"host":"frontend","port":{"number":80}}}]}]}}
    creationTimestamp: "2024-10-03T04:35:47Z"
    generation: 1
    name: frontend
    namespace: gallery
    resourceVersion: "367872"
    uid: 1491f1e3-1bab-41e5-99e5-2593a4f570bc
  spec:
    hosts:
    - frontend.default.svc.cluster.local
    http:
    - route:
      - destination:
          host: frontend
          port:
            number: 80
- apiVersion: networking.k8s.io/v1
  kind: NetworkPolicy
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"networking.k8s.io/v1","kind":"NetworkPolicy","metadata":{"annotations":{},"name":"openshift-monitoring","namespace":"gallery"},"spec":{"ingress":[{"from":[{"namespaceSelector":{"matchLabels":{"network.openshift.io/policy-group":"monitoring"}}}]}],"podSelector":{},"policyTypes":["Ingress"]}}
    creationTimestamp: "2024-10-03T04:35:47Z"
    generation: 1
    name: openshift-monitoring
    namespace: gallery
    resourceVersion: "367875"
    uid: 3288bf88-0d4f-44c8-aa53-4cdcbeff4ca8
  spec:
    ingress:
    - from:
      - namespaceSelector:
          matchLabels:
            network.openshift.io/policy-group: monitoring
    podSelector: {}
    policyTypes:
    - Ingress
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"adservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"adservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"adservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"9555"},{"name":"JAEGER_SERVICE_ADDR","value":"jaeger-collector:14268"}],"image":"quay.io/linuxeroagrio/adservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:9555"]},"initialDelaySeconds":20,"periodSeconds":15},"name":"server","ports":[{"containerPort":9555},{"containerPort":9393}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:9555"]},"initialDelaySeconds":20,"periodSeconds":15},"resources":{"limits":{"cpu":"300m","memory":"300Mi"},"requests":{"cpu":"200m","memory":"180Mi"}}}],"serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:47Z"
    generation: 1
    name: adservice
    namespace: gallery
    resourceVersion: "1090429"
    uid: fd79f8b8-3211-4e36-af0e-8451b6fd16db
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: adservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: adservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "9555"
          - name: JAEGER_SERVICE_ADDR
            value: jaeger-collector:14268
          image: quay.io/linuxeroagrio/adservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:9555
            failureThreshold: 3
            initialDelaySeconds: 20
            periodSeconds: 15
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 9555
            protocol: TCP
          - containerPort: 9393
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:9555
            failureThreshold: 3
            initialDelaySeconds: 20
            periodSeconds: 15
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 300m
              memory: 300Mi
            requests:
              cpu: 200m
              memory: 180Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:47Z"
      lastUpdateTime: "2024-10-03T04:36:33Z"
      message: ReplicaSet "adservice-58f8b8c6b4" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:06:02Z"
      lastUpdateTime: "2024-10-08T16:06:02Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app":"adservice"},"name":"adservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":9555,"targetPort":9555},{"name":"metrics","port":9393}],"selector":{"app":"adservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:47Z"
    labels:
      app: adservice
    name: adservice
    namespace: gallery
    resourceVersion: "367898"
    uid: d1023e02-2d65-4fa3-a505-74f35399518b
  spec:
    clusterIP: 172.30.47.116
    clusterIPs:
    - 172.30.47.116
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 9555
      protocol: TCP
      targetPort: 9555
    - name: metrics
      port: 9393
      protocol: TCP
      targetPort: 9393
    selector:
      app: adservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"monitoring.coreos.com/v1","kind":"ServiceMonitor","metadata":{"annotations":{},"name":"adservice","namespace":"gallery"},"spec":{"endpoints":[{"interval":"30s","port":"metrics","scheme":"http"}],"selector":{"matchLabels":{"app":"adservice"}}}}
    creationTimestamp: "2024-10-03T04:35:48Z"
    generation: 1
    name: adservice
    namespace: gallery
    resourceVersion: "367902"
    uid: ddfced27-2425-4f4e-bf2e-42027c53953c
  spec:
    endpoints:
    - interval: 30s
      port: metrics
      scheme: http
    selector:
      matchLabels:
        app: adservice
- apiVersion: monitoring.coreos.com/v1
  kind: PrometheusRule
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"monitoring.coreos.com/v1","kind":"PrometheusRule","metadata":{"annotations":{},"name":"alerting-rules","namespace":"gallery"},"spec":{"groups":[{"name":"redhatgallery","rules":[{"alert":"RedHatGalleryResponseSlow","annotations":{"description":"Method {{ $labels.grpc_server_method_short }} in namespace {{ $labels.namespace }} is too slow. {{ $value | humanizePercentage }} of requests take more than 200ms.","summary":null},"expr":"1 - label_replace(\n  (\n    (sum without (instance, pod)\n      (rate(grpc_io_server_server_latency_bucket{le=\"200\"}[2m]))\n    )\n      / ignoring(le)\n    (sum without (instance, pod)\n      (rate(grpc_io_server_server_latency_bucket{le=\"+Inf\"}[2m]))\n    )\n  ),\n  \"grpc_server_method_short\", \"$1\", \"grpc_server_method\", \".*\\\\.(.*)\"\n) \u003e 0.25\n","for":"1m","labels":{"severity":"warning"}},{"alert":"RedHatGalleryResponseVerySlow","annotations":{"description":"Method {{ $labels.grpc_server_method_short }} in namespace {{ $labels.namespace }} is too slow. {{ $value | humanizePercentage }} of requests take more than 500ms.","summary":null},"expr":"1 - label_replace(\n  (\n    (sum without (instance, pod)\n      (rate(grpc_io_server_server_latency_bucket{le=\"500\"}[2m]))\n    )\n      / ignoring(le)\n    (sum without (instance, pod)\n      (rate(grpc_io_server_server_latency_bucket{le=\"+Inf\"}[2m]))\n    )\n  ),\n  \"grpc_server_method_short\", \"$1\", \"grpc_server_method\", \".*\\\\.(.*)\"\n) \u003e 0.25\n","for":"1m","labels":{"severity":"critical"}},{"alert":"RedHatGalleryResponseSlow","annotations":{"description":"Response of service {{ $labels.service }} in namespace {{ $labels.namespace }} is too slow. {{ $value | humanizePercentage }} of requests take more than 200ms.","summary":null},"expr":"1 - (\n  (sum without (instance, pod)\n    (rate(opencensus_io_http_server_latency_bucket{le=\"200\"}[2m]))\n  )\n    / ignoring(le)\n  (sum without (instance, pod)\n    (rate(opencensus_io_http_server_latency_bucket{le=\"+Inf\"}[2m]))\n  )\n) \u003e 0.25\n","for":"1m","labels":{"severity":"warning"}},{"alert":"RedHatGalleryResponseVerySlow","annotations":{"description":"Response of service {{ $labels.service }} in namespace {{ $labels.namespace }} is too slow. {{ $value | humanizePercentage }} of requests take more than 500ms.","summary":null},"expr":"1 - (\n  (sum without (instance, pod)\n    (rate(opencensus_io_http_server_latency_bucket{le=\"500\"}[2m]))\n  )\n    / ignoring(le)\n  (sum without (instance, pod)\n    (rate(opencensus_io_http_server_latency_bucket{le=\"+Inf\"}[2m]))\n  )\n) \u003e 0.25\n","for":"1m","labels":{"severity":"critical"}},{"alert":"RedHatGalleryTooManyFailingRequests","annotations":{"description":"{{ $value | humanizePercentage }} of calls to method {{ $labels.grpc_server_method_short }} in namespace {{ $labels.namespace }} is failing.\n"},"expr":"label_replace(\n  (\n    (sum without (grpc_server_status, instance, pod)\n      (rate(grpc_io_server_completed_rpcs_total{grpc_server_status!=\"OK\"}[2m]))\n    )\n      /\n    (sum without (grpc_server_status, instance, pod)\n      (rate(grpc_io_server_completed_rpcs_total[2m]))\n    )\n  ),\n  \"grpc_server_method_short\", \"$1\", \"grpc_server_method\", \".*\\\\.(.*)\"\n) \u003e 0.05\n","for":"1m","labels":{"severity":"warning"}},{"alert":"RedHatGalleryTooManyFailingRequests","annotations":{"description":"{{ $value | humanizePercentage }} of calls to method {{ $labels.grpc_server_method_short }} in namespace {{ $labels.namespace }} is failing.\n"},"expr":"label_replace(\n  (\n    (sum without (grpc_server_status, instance, pod)\n      (rate(grpc_io_server_completed_rpcs{grpc_server_status!=\"OK\"}[2m]))\n    )\n      /\n    (sum without (grpc_server_status, instance, pod)\n      (rate(grpc_io_server_completed_rpcs[2m]))\n    )\n  ),\n  \"grpc_server_method_short\", \"$1\", \"grpc_server_method\", \".*\\\\.(.*)\"\n) \u003e 0.05\n","for":"1m","labels":{"severity":"warning"}},{"alert":"RedHatGalleryTooManyFailingRequests","annotations":{"description":"{{ $value | humanizePercentage }} of calls to method {{ $labels.grpc_client_method_short }} in namespace {{ $labels.namespace }} is failing.\n"},"expr":"label_replace(\n  (\n    (sum without (grpc_client_status, instance, pod)\n      (rate(grpc_io_client_completed_rpcs{grpc_client_status!=\"OK\"}[2m]))\n    )\n      /\n    (sum without (grpc_client_status, instance, pod)\n      (rate(grpc_io_client_completed_rpcs[2m]))\n    )\n  ),\n  \"grpc_client_method_short\", \"$1\", \"grpc_client_method\", \".*\\\\.(.*)\"\n) \u003e 0.05\n","for":"1m","labels":{"severity":"warning"}},{"alert":"RedHatGalleryTooManyFailingRequests","annotations":{"description":"{{ $value | humanizePercentage }} of HTTP calls to service {{ $labels.service }} in namespace {{ $labels.namespace }} is failing.\n"},"expr":"(\n  (sum without (http_status, instance, pod)\n    (rate(opencensus_io_http_server_response_count_by_status_code{http_status=~\"4.*|5.*\"}[2m]))\n  )\n    /\n  (sum without (http_status, instance, pod)\n    (rate(opencensus_io_http_server_response_count_by_status_code[2m]))\n  )\n) \u003e 0.05\n","for":"1m","labels":{"severity":"warning"}}]}]}}
    creationTimestamp: "2024-10-03T04:35:48Z"
    generation: 1
    name: alerting-rules
    namespace: gallery
    resourceVersion: "367907"
    uid: 9dd0309a-0a08-4590-9e4b-35ac72df426b
  spec:
    groups:
    - name: redhatgallery
      rules:
      - alert: RedHatGalleryResponseSlow
        annotations:
          description: Method {{ $labels.grpc_server_method_short }} in namespace
            {{ $labels.namespace }} is too slow. {{ $value | humanizePercentage }}
            of requests take more than 200ms.
        expr: |
          1 - label_replace(
            (
              (sum without (instance, pod)
                (rate(grpc_io_server_server_latency_bucket{le="200"}[2m]))
              )
                / ignoring(le)
              (sum without (instance, pod)
                (rate(grpc_io_server_server_latency_bucket{le="+Inf"}[2m]))
              )
            ),
            "grpc_server_method_short", "$1", "grpc_server_method", ".*\\.(.*)"
          ) > 0.25
        for: 1m
        labels:
          severity: warning
      - alert: RedHatGalleryResponseVerySlow
        annotations:
          description: Method {{ $labels.grpc_server_method_short }} in namespace
            {{ $labels.namespace }} is too slow. {{ $value | humanizePercentage }}
            of requests take more than 500ms.
        expr: |
          1 - label_replace(
            (
              (sum without (instance, pod)
                (rate(grpc_io_server_server_latency_bucket{le="500"}[2m]))
              )
                / ignoring(le)
              (sum without (instance, pod)
                (rate(grpc_io_server_server_latency_bucket{le="+Inf"}[2m]))
              )
            ),
            "grpc_server_method_short", "$1", "grpc_server_method", ".*\\.(.*)"
          ) > 0.25
        for: 1m
        labels:
          severity: critical
      - alert: RedHatGalleryResponseSlow
        annotations:
          description: Response of service {{ $labels.service }} in namespace {{ $labels.namespace
            }} is too slow. {{ $value | humanizePercentage }} of requests take more
            than 200ms.
        expr: |
          1 - (
            (sum without (instance, pod)
              (rate(opencensus_io_http_server_latency_bucket{le="200"}[2m]))
            )
              / ignoring(le)
            (sum without (instance, pod)
              (rate(opencensus_io_http_server_latency_bucket{le="+Inf"}[2m]))
            )
          ) > 0.25
        for: 1m
        labels:
          severity: warning
      - alert: RedHatGalleryResponseVerySlow
        annotations:
          description: Response of service {{ $labels.service }} in namespace {{ $labels.namespace
            }} is too slow. {{ $value | humanizePercentage }} of requests take more
            than 500ms.
        expr: |
          1 - (
            (sum without (instance, pod)
              (rate(opencensus_io_http_server_latency_bucket{le="500"}[2m]))
            )
              / ignoring(le)
            (sum without (instance, pod)
              (rate(opencensus_io_http_server_latency_bucket{le="+Inf"}[2m]))
            )
          ) > 0.25
        for: 1m
        labels:
          severity: critical
      - alert: RedHatGalleryTooManyFailingRequests
        annotations:
          description: |
            {{ $value | humanizePercentage }} of calls to method {{ $labels.grpc_server_method_short }} in namespace {{ $labels.namespace }} is failing.
        expr: |
          label_replace(
            (
              (sum without (grpc_server_status, instance, pod)
                (rate(grpc_io_server_completed_rpcs_total{grpc_server_status!="OK"}[2m]))
              )
                /
              (sum without (grpc_server_status, instance, pod)
                (rate(grpc_io_server_completed_rpcs_total[2m]))
              )
            ),
            "grpc_server_method_short", "$1", "grpc_server_method", ".*\\.(.*)"
          ) > 0.05
        for: 1m
        labels:
          severity: warning
      - alert: RedHatGalleryTooManyFailingRequests
        annotations:
          description: |
            {{ $value | humanizePercentage }} of calls to method {{ $labels.grpc_server_method_short }} in namespace {{ $labels.namespace }} is failing.
        expr: |
          label_replace(
            (
              (sum without (grpc_server_status, instance, pod)
                (rate(grpc_io_server_completed_rpcs{grpc_server_status!="OK"}[2m]))
              )
                /
              (sum without (grpc_server_status, instance, pod)
                (rate(grpc_io_server_completed_rpcs[2m]))
              )
            ),
            "grpc_server_method_short", "$1", "grpc_server_method", ".*\\.(.*)"
          ) > 0.05
        for: 1m
        labels:
          severity: warning
      - alert: RedHatGalleryTooManyFailingRequests
        annotations:
          description: |
            {{ $value | humanizePercentage }} of calls to method {{ $labels.grpc_client_method_short }} in namespace {{ $labels.namespace }} is failing.
        expr: |
          label_replace(
            (
              (sum without (grpc_client_status, instance, pod)
                (rate(grpc_io_client_completed_rpcs{grpc_client_status!="OK"}[2m]))
              )
                /
              (sum without (grpc_client_status, instance, pod)
                (rate(grpc_io_client_completed_rpcs[2m]))
              )
            ),
            "grpc_client_method_short", "$1", "grpc_client_method", ".*\\.(.*)"
          ) > 0.05
        for: 1m
        labels:
          severity: warning
      - alert: RedHatGalleryTooManyFailingRequests
        annotations:
          description: |
            {{ $value | humanizePercentage }} of HTTP calls to service {{ $labels.service }} in namespace {{ $labels.namespace }} is failing.
        expr: |
          (
            (sum without (http_status, instance, pod)
              (rate(opencensus_io_http_server_response_count_by_status_code{http_status=~"4.*|5.*"}[2m]))
            )
              /
            (sum without (http_status, instance, pod)
              (rate(opencensus_io_http_server_response_count_by_status_code[2m]))
            )
          ) > 0.05
        for: 1m
        labels:
          severity: warning
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"cartservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"cartservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"cartservice"}},"spec":{"containers":[{"env":[{"name":"REDIS_ADDR","value":"redis-cart:6379"}],"image":"quay.io/linuxeroagrio/cartservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:7070","-rpc-timeout=5s"]},"initialDelaySeconds":15,"periodSeconds":10},"name":"server","ports":[{"containerPort":7070}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:7070","-rpc-timeout=5s"]},"initialDelaySeconds":15},"resources":{"limits":{"cpu":"300m","memory":"128Mi"},"requests":{"cpu":"200m","memory":"64Mi"}}}],"serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:48Z"
    generation: 1
    name: cartservice
    namespace: gallery
    resourceVersion: "1086152"
    uid: 83082ae8-2660-43f3-92b7-65933cfe5060
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: cartservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: cartservice
      spec:
        containers:
        - env:
          - name: REDIS_ADDR
            value: redis-cart:6379
          image: quay.io/linuxeroagrio/cartservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:7070
              - -rpc-timeout=5s
            failureThreshold: 3
            initialDelaySeconds: 15
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 7070
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:7070
              - -rpc-timeout=5s
            failureThreshold: 3
            initialDelaySeconds: 15
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 300m
              memory: 128Mi
            requests:
              cpu: 200m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:48Z"
      lastUpdateTime: "2024-10-03T04:36:09Z"
      message: ReplicaSet "cartservice-b94cd899c" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:01:07Z"
      lastUpdateTime: "2024-10-08T16:01:07Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"cartservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":7070,"targetPort":7070}],"selector":{"app":"cartservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:48Z"
    name: cartservice
    namespace: gallery
    resourceVersion: "367930"
    uid: ece4acb6-ee6d-4740-a432-df1190e9aea7
  spec:
    clusterIP: 172.30.177.97
    clusterIPs:
    - 172.30.177.97
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 7070
      protocol: TCP
      targetPort: 7070
    selector:
      app: cartservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"checkoutservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"checkoutservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"checkoutservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"5050"},{"name":"PRODUCT_CATALOG_SERVICE_ADDR","value":"productcatalogservice:3550"},{"name":"SHIPPING_SERVICE_ADDR","value":"shippingservice:50051"},{"name":"PAYMENT_SERVICE_ADDR","value":"paymentservice:50051"},{"name":"EMAIL_SERVICE_ADDR","value":"emailservice:5000"},{"name":"CURRENCY_SERVICE_ADDR","value":"currencyservice:7000"},{"name":"CART_SERVICE_ADDR","value":"cartservice:7070"},{"name":"DISABLE_PROFILER","value":"1"},{"name":"JAEGER_SERVICE_ADDR","value":"jaeger-collector:14268"}],"image":"quay.io/linuxeroagrio/checkoutservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:5050"]}},"name":"server","ports":[{"containerPort":5050},{"containerPort":9393}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:5050"]}},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}}}],"serviceAccountName":"default"}}}}
    creationTimestamp: "2024-10-03T04:35:48Z"
    generation: 1
    name: checkoutservice
    namespace: gallery
    resourceVersion: "1085947"
    uid: 5ef7316c-34be-43f8-8d57-42ec6829523c
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: checkoutservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: checkoutservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "5050"
          - name: PRODUCT_CATALOG_SERVICE_ADDR
            value: productcatalogservice:3550
          - name: SHIPPING_SERVICE_ADDR
            value: shippingservice:50051
          - name: PAYMENT_SERVICE_ADDR
            value: paymentservice:50051
          - name: EMAIL_SERVICE_ADDR
            value: emailservice:5000
          - name: CURRENCY_SERVICE_ADDR
            value: currencyservice:7000
          - name: CART_SERVICE_ADDR
            value: cartservice:7070
          - name: DISABLE_PROFILER
            value: "1"
          - name: JAEGER_SERVICE_ADDR
            value: jaeger-collector:14268
          image: quay.io/linuxeroagrio/checkoutservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:5050
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 5050
            protocol: TCP
          - containerPort: 9393
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:5050
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:48Z"
      lastUpdateTime: "2024-10-03T04:35:52Z"
      message: ReplicaSet "checkoutservice-5d95896c98" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:58Z"
      lastUpdateTime: "2024-10-08T16:00:58Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app":"checkoutservice"},"name":"checkoutservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":5050,"targetPort":5050},{"name":"metrics","port":9393}],"selector":{"app":"checkoutservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:49Z"
    labels:
      app: checkoutservice
    name: checkoutservice
    namespace: gallery
    resourceVersion: "367953"
    uid: a90019fb-3c1f-4967-8a24-f72dcedcbe64
  spec:
    clusterIP: 172.30.214.242
    clusterIPs:
    - 172.30.214.242
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 5050
      protocol: TCP
      targetPort: 5050
    - name: metrics
      port: 9393
      protocol: TCP
      targetPort: 9393
    selector:
      app: checkoutservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"monitoring.coreos.com/v1","kind":"ServiceMonitor","metadata":{"annotations":{},"name":"checkoutservice","namespace":"gallery"},"spec":{"endpoints":[{"interval":"30s","port":"metrics","scheme":"http"}],"selector":{"matchLabels":{"app":"checkoutservice"}}}}
    creationTimestamp: "2024-10-03T04:35:49Z"
    generation: 1
    name: checkoutservice
    namespace: gallery
    resourceVersion: "367960"
    uid: 0ed2ab9d-578a-4dca-ab88-107703bd7c71
  spec:
    endpoints:
    - interval: 30s
      port: metrics
      scheme: http
    selector:
      matchLabels:
        app: checkoutservice
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"currencyservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"currencyservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"currencyservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"7000"},{"name":"DISABLE_PROFILER","value":"1"},{"name":"DISABLE_DEBUGGER","value":"1"}],"image":"quay.io/linuxeroagrio/currencyservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:7000"]}},"name":"server","ports":[{"containerPort":7000,"name":"grpc"}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:7000"]}},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}}}],"serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:49Z"
    generation: 1
    name: currencyservice
    namespace: gallery
    resourceVersion: "1085494"
    uid: d2417f9a-886d-4db6-b903-0483b837b318
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: currencyservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: currencyservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "7000"
          - name: DISABLE_PROFILER
            value: "1"
          - name: DISABLE_DEBUGGER
            value: "1"
          image: quay.io/linuxeroagrio/currencyservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:7000
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 7000
            name: grpc
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:7000
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:49Z"
      lastUpdateTime: "2024-10-03T04:35:53Z"
      message: ReplicaSet "currencyservice-66cbdb7f98" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:35Z"
      lastUpdateTime: "2024-10-08T16:00:35Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"currencyservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":7000,"targetPort":7000}],"selector":{"app":"currencyservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:49Z"
    name: currencyservice
    namespace: gallery
    resourceVersion: "367983"
    uid: d3d4d8fe-1cc5-4d20-8e90-21067405ccda
  spec:
    clusterIP: 172.30.14.8
    clusterIPs:
    - 172.30.14.8
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 7000
      protocol: TCP
      targetPort: 7000
    selector:
      app: currencyservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"emailservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"emailservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"emailservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"8080"},{"name":"DISABLE_PROFILER","value":"1"}],"image":"quay.io/linuxeroagrio/emailservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:8080"]},"periodSeconds":5},"name":"server","ports":[{"containerPort":8080}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:8080"]},"periodSeconds":5},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}}}],"serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:49Z"
    generation: 1
    name: emailservice
    namespace: gallery
    resourceVersion: "1085998"
    uid: fdeedf3d-1956-4395-a431-d24078f83ad8
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: emailservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: emailservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "8080"
          - name: DISABLE_PROFILER
            value: "1"
          image: quay.io/linuxeroagrio/emailservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:8080
            failureThreshold: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 8080
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:8080
            failureThreshold: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:49Z"
      lastUpdateTime: "2024-10-03T04:35:54Z"
      message: ReplicaSet "emailservice-559547cc66" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:01:00Z"
      lastUpdateTime: "2024-10-08T16:01:00Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"emailservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":5000,"targetPort":8080}],"selector":{"app":"emailservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:50Z"
    name: emailservice
    namespace: gallery
    resourceVersion: "368020"
    uid: eebb6e27-dd16-4470-90c2-c9e2e81f7dbe
  spec:
    clusterIP: 172.30.230.36
    clusterIPs:
    - 172.30.230.36
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 5000
      protocol: TCP
      targetPort: 8080
    selector:
      app: emailservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"frontend","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"frontend"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true","sidecar.istio.io/rewriteAppHTTPProbers":"true"},"labels":{"app":"frontend"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"8080"},{"name":"PRODUCT_CATALOG_SERVICE_ADDR","value":"productcatalogservice:3550"},{"name":"CURRENCY_SERVICE_ADDR","value":"currencyservice:7000"},{"name":"CART_SERVICE_ADDR","value":"cartservice:7070"},{"name":"RECOMMENDATION_SERVICE_ADDR","value":"recommendationservice:8080"},{"name":"SHIPPING_SERVICE_ADDR","value":"shippingservice:50051"},{"name":"CHECKOUT_SERVICE_ADDR","value":"checkoutservice:5050"},{"name":"AD_SERVICE_ADDR","value":"adservice:9555"},{"name":"DISABLE_PROFILER","value":"1"},{"name":"JAEGER_SERVICE_ADDR","value":"jaeger-collector:14268"}],"image":"quay.io/linuxeroagrio/frontend:latest","livenessProbe":{"httpGet":{"httpHeaders":[{"name":"Cookie","value":"shop_session-id=x-liveness-probe"}],"path":"/_healthz","port":8080},"initialDelaySeconds":10},"name":"server","ports":[{"containerPort":8080},{"containerPort":9393}],"readinessProbe":{"httpGet":{"httpHeaders":[{"name":"Cookie","value":"shop_session-id=x-readiness-probe"}],"path":"/_healthz","port":8080},"initialDelaySeconds":10},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}}}],"serviceAccountName":"default"}}}}
    creationTimestamp: "2024-10-03T04:35:50Z"
    generation: 1
    name: frontend
    namespace: gallery
    resourceVersion: "1086127"
    uid: 401a321e-987a-44a3-821e-bf10063395bc
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: frontend
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
          sidecar.istio.io/rewriteAppHTTPProbers: "true"
        creationTimestamp: null
        labels:
          app: frontend
      spec:
        containers:
        - env:
          - name: PORT
            value: "8080"
          - name: PRODUCT_CATALOG_SERVICE_ADDR
            value: productcatalogservice:3550
          - name: CURRENCY_SERVICE_ADDR
            value: currencyservice:7000
          - name: CART_SERVICE_ADDR
            value: cartservice:7070
          - name: RECOMMENDATION_SERVICE_ADDR
            value: recommendationservice:8080
          - name: SHIPPING_SERVICE_ADDR
            value: shippingservice:50051
          - name: CHECKOUT_SERVICE_ADDR
            value: checkoutservice:5050
          - name: AD_SERVICE_ADDR
            value: adservice:9555
          - name: DISABLE_PROFILER
            value: "1"
          - name: JAEGER_SERVICE_ADDR
            value: jaeger-collector:14268
          image: quay.io/linuxeroagrio/frontend:latest
          imagePullPolicy: Always
          livenessProbe:
            failureThreshold: 3
            httpGet:
              httpHeaders:
              - name: Cookie
                value: shop_session-id=x-liveness-probe
              path: /_healthz
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 8080
            protocol: TCP
          - containerPort: 9393
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            httpGet:
              httpHeaders:
              - name: Cookie
                value: shop_session-id=x-readiness-probe
              path: /_healthz
              port: 8080
              scheme: HTTP
            initialDelaySeconds: 10
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:50Z"
      lastUpdateTime: "2024-10-03T04:36:10Z"
      message: ReplicaSet "frontend-c97cf44bf" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:01:06Z"
      lastUpdateTime: "2024-10-08T16:01:06Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app":"frontend"},"name":"frontend","namespace":"gallery"},"spec":{"ports":[{"name":"http","port":80,"targetPort":8080},{"name":"metrics","port":9393}],"selector":{"app":"frontend"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:50Z"
    labels:
      app: frontend
    name: frontend
    namespace: gallery
    resourceVersion: "368043"
    uid: 6319a70f-c823-416c-8be3-25f26853ed8a
  spec:
    clusterIP: 172.30.225.19
    clusterIPs:
    - 172.30.225.19
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: http
      port: 80
      protocol: TCP
      targetPort: 8080
    - name: metrics
      port: 9393
      protocol: TCP
      targetPort: 9393
    selector:
      app: frontend
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"frontend-external","namespace":"gallery"},"spec":{"ports":[{"name":"http","port":80,"targetPort":8080}],"selector":{"app":"frontend"},"type":"LoadBalancer"}}
    creationTimestamp: "2024-10-03T04:35:50Z"
    finalizers:
    - service.kubernetes.io/load-balancer-cleanup
    name: frontend-external
    namespace: gallery
    resourceVersion: "368666"
    uid: 053020ea-d0b6-4fe7-8beb-500d6c029bcd
  spec:
    allocateLoadBalancerNodePorts: true
    clusterIP: 172.30.23.11
    clusterIPs:
    - 172.30.23.11
    externalTrafficPolicy: Cluster
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: http
      nodePort: 31280
      port: 80
      protocol: TCP
      targetPort: 8080
    selector:
      app: frontend
    sessionAffinity: None
    type: LoadBalancer
  status:
    loadBalancer:
      ingress:
      - ip: 34.75.176.16
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"monitoring.coreos.com/v1","kind":"ServiceMonitor","metadata":{"annotations":{},"name":"frontend","namespace":"gallery"},"spec":{"endpoints":[{"interval":"30s","port":"metrics","scheme":"http"}],"selector":{"matchLabels":{"app":"frontend"}}}}
    creationTimestamp: "2024-10-03T04:35:50Z"
    generation: 1
    name: frontend
    namespace: gallery
    resourceVersion: "368065"
    uid: c62b2915-86e4-45df-8358-bd7ce4a1b335
  spec:
    endpoints:
    - interval: 30s
      port: metrics
      scheme: http
    selector:
      matchLabels:
        app: frontend
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"loadgenerator","namespace":"gallery"},"spec":{"replicas":1,"selector":{"matchLabels":{"app":"loadgenerator"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true","sidecar.istio.io/rewriteAppHTTPProbers":"true"},"labels":{"app":"loadgenerator"}},"spec":{"containers":[{"env":[{"name":"FRONTEND_ADDR","value":"frontend:80"},{"name":"USERS","value":"10"}],"image":"quay.io/linuxeroagrio/loadgenerator:latest","name":"main","resources":{"limits":{"cpu":"500m","memory":"512Mi"},"requests":{"cpu":"300m","memory":"256Mi"}}}],"initContainers":[{"command":["/bin/sh","-exc","echo \"Init container pinging frontend: ${FRONTEND_ADDR}...\"\nSTATUSCODE=$(wget --server-response http://${FRONTEND_ADDR} 2\u003e\u00261 | awk '/^  HTTP/{print $2}')\nif test $STATUSCODE -ne 200; then\n    echo \"Error: Could not reach frontend - Status code: ${STATUSCODE}\"\n    exit 1\nfi\n"],"env":[{"name":"FRONTEND_ADDR","value":"frontend:80"}],"image":"busybox:latest","name":"frontend-check"}],"restartPolicy":"Always","serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:51Z"
    generation: 1
    name: loadgenerator
    namespace: gallery
    resourceVersion: "1085642"
    uid: d4ce3459-e51a-43fa-9857-7a5b400a0714
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: loadgenerator
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
          sidecar.istio.io/rewriteAppHTTPProbers: "true"
        creationTimestamp: null
        labels:
          app: loadgenerator
      spec:
        containers:
        - env:
          - name: FRONTEND_ADDR
            value: frontend:80
          - name: USERS
            value: "10"
          image: quay.io/linuxeroagrio/loadgenerator:latest
          imagePullPolicy: Always
          name: main
          resources:
            limits:
              cpu: 500m
              memory: 512Mi
            requests:
              cpu: 300m
              memory: 256Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        initContainers:
        - command:
          - /bin/sh
          - -exc
          - |
            echo "Init container pinging frontend: ${FRONTEND_ADDR}..."
            STATUSCODE=$(wget --server-response http://${FRONTEND_ADDR} 2>&1 | awk '/^  HTTP/{print $2}')
            if test $STATUSCODE -ne 200; then
                echo "Error: Could not reach frontend - Status code: ${STATUSCODE}"
                exit 1
            fi
          env:
          - name: FRONTEND_ADDR
            value: frontend:80
          image: busybox:latest
          imagePullPolicy: Always
          name: frontend-check
          resources: {}
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:51Z"
      lastUpdateTime: "2024-10-03T04:36:18Z"
      message: ReplicaSet "loadgenerator-f8d4f4b8b" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:42Z"
      lastUpdateTime: "2024-10-08T16:00:42Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"paymentservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"paymentservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"paymentservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"50051"},{"name":"DISABLE_PROFILER","value":"1"},{"name":"DISABLE_DEBUGGER","value":"1"}],"image":"quay.io/linuxeroagrio/paymentservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:50051"]}},"name":"server","ports":[{"containerPort":50051}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:50051"]}},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}}}],"serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:51Z"
    generation: 1
    name: paymentservice
    namespace: gallery
    resourceVersion: "1085983"
    uid: a1dfb16c-0706-41fe-a317-9576c4683616
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: paymentservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: paymentservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "50051"
          - name: DISABLE_PROFILER
            value: "1"
          - name: DISABLE_DEBUGGER
            value: "1"
          image: quay.io/linuxeroagrio/paymentservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:50051
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 50051
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:50051
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:51Z"
      lastUpdateTime: "2024-10-03T04:35:55Z"
      message: ReplicaSet "paymentservice-595548bdf4" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:59Z"
      lastUpdateTime: "2024-10-08T16:00:59Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"paymentservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":50051,"targetPort":50051}],"selector":{"app":"paymentservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:51Z"
    name: paymentservice
    namespace: gallery
    resourceVersion: "368120"
    uid: 0ebecf71-ff89-4db5-946f-cf142ef76c70
  spec:
    clusterIP: 172.30.106.173
    clusterIPs:
    - 172.30.106.173
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 50051
      protocol: TCP
      targetPort: 50051
    selector:
      app: paymentservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"productcatalogservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"productcatalogservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"productcatalogservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"3550"},{"name":"DISABLE_PROFILER","value":"1"},{"name":"JAEGER_SERVICE_ADDR","value":"jaeger-collector:14268"}],"image":"quay.io/linuxeroagrio/productcatalogservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:3550"]}},"name":"server","ports":[{"containerPort":3550},{"containerPort":9393}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:3550"]}},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}}}],"serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:51Z"
    generation: 1
    name: productcatalogservice
    namespace: gallery
    resourceVersion: "1085468"
    uid: a4e3e5b2-8aa6-4c91-a5f4-627e65f3fd6b
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: productcatalogservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: productcatalogservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "3550"
          - name: DISABLE_PROFILER
            value: "1"
          - name: JAEGER_SERVICE_ADDR
            value: jaeger-collector:14268
          image: quay.io/linuxeroagrio/productcatalogservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:3550
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 3550
            protocol: TCP
          - containerPort: 9393
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:3550
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:51Z"
      lastUpdateTime: "2024-10-03T04:36:01Z"
      message: ReplicaSet "productcatalogservice-7d46f945dd" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:34Z"
      lastUpdateTime: "2024-10-08T16:00:34Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app":"productcatalogservice"},"name":"productcatalogservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":3550,"targetPort":3550},{"name":"metrics","port":9393}],"selector":{"app":"productcatalogservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:51Z"
    labels:
      app: productcatalogservice
    name: productcatalogservice
    namespace: gallery
    resourceVersion: "368150"
    uid: ee8640d5-e9f4-4041-abf5-4ad39e1cf7bd
  spec:
    clusterIP: 172.30.203.134
    clusterIPs:
    - 172.30.203.134
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 3550
      protocol: TCP
      targetPort: 3550
    - name: metrics
      port: 9393
      protocol: TCP
      targetPort: 9393
    selector:
      app: productcatalogservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"monitoring.coreos.com/v1","kind":"ServiceMonitor","metadata":{"annotations":{},"name":"productcatalogservice","namespace":"gallery"},"spec":{"endpoints":[{"interval":"30s","port":"metrics","scheme":"http"}],"selector":{"matchLabels":{"app":"productcatalogservice"}}}}
    creationTimestamp: "2024-10-03T04:35:52Z"
    generation: 1
    name: productcatalogservice
    namespace: gallery
    resourceVersion: "368156"
    uid: d1ecad17-7613-48d8-a013-214da2c386f1
  spec:
    endpoints:
    - interval: 30s
      port: metrics
      scheme: http
    selector:
      matchLabels:
        app: productcatalogservice
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"recommendationservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"recommendationservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"recommendationservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"8080"},{"name":"PRODUCT_CATALOG_SERVICE_ADDR","value":"productcatalogservice:3550"},{"name":"DISABLE_PROFILER","value":"1"},{"name":"DISABLE_DEBUGGER","value":"1"}],"image":"quay.io/linuxeroagrio/recommendationservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:8080"]},"periodSeconds":5},"name":"server","ports":[{"containerPort":8080}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:8080"]},"periodSeconds":5},"resources":{"limits":{"cpu":"200m","memory":"450Mi"},"requests":{"cpu":"100m","memory":"220Mi"}}}],"serviceAccountName":"default","terminationGracePeriodSeconds":5}}}}
    creationTimestamp: "2024-10-03T04:35:52Z"
    generation: 1
    name: recommendationservice
    namespace: gallery
    resourceVersion: "1085495"
    uid: e0aa1854-8379-46b4-bc57-cc5d2d83324c
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: recommendationservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: recommendationservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "8080"
          - name: PRODUCT_CATALOG_SERVICE_ADDR
            value: productcatalogservice:3550
          - name: DISABLE_PROFILER
            value: "1"
          - name: DISABLE_DEBUGGER
            value: "1"
          image: quay.io/linuxeroagrio/recommendationservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:8080
            failureThreshold: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 8080
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:8080
            failureThreshold: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 450Mi
            requests:
              cpu: 100m
              memory: 220Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 5
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:52Z"
      lastUpdateTime: "2024-10-03T04:35:56Z"
      message: ReplicaSet "recommendationservice-589d9647f6" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:35Z"
      lastUpdateTime: "2024-10-08T16:00:35Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"recommendationservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":8080,"targetPort":8080}],"selector":{"app":"recommendationservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:52Z"
    name: recommendationservice
    namespace: gallery
    resourceVersion: "368195"
    uid: 1da3e0dd-c90d-472a-a85c-8ce22a701343
  spec:
    clusterIP: 172.30.224.86
    clusterIPs:
    - 172.30.224.86
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 8080
      protocol: TCP
      targetPort: 8080
    selector:
      app: recommendationservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"redis-cart","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"redis-cart"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"redis-cart"}},"spec":{"containers":[{"image":"redis:alpine","livenessProbe":{"periodSeconds":5,"tcpSocket":{"port":6379}},"name":"redis","ports":[{"containerPort":6379}],"readinessProbe":{"periodSeconds":5,"tcpSocket":{"port":6379}},"resources":{"limits":{"cpu":"125m","memory":"256Mi"},"requests":{"cpu":"70m","memory":"200Mi"}},"volumeMounts":[{"mountPath":"/data","name":"redis-data"}]}],"volumes":[{"emptyDir":{},"name":"redis-data"}]}}}}
    creationTimestamp: "2024-10-03T04:35:52Z"
    generation: 1
    name: redis-cart
    namespace: gallery
    resourceVersion: "1085975"
    uid: 24baefaf-354d-46d7-bdf9-6b6f96966b4f
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: redis-cart
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: redis-cart
      spec:
        containers:
        - image: redis:alpine
          imagePullPolicy: IfNotPresent
          livenessProbe:
            failureThreshold: 3
            periodSeconds: 5
            successThreshold: 1
            tcpSocket:
              port: 6379
            timeoutSeconds: 1
          name: redis
          ports:
          - containerPort: 6379
            protocol: TCP
          readinessProbe:
            failureThreshold: 3
            periodSeconds: 5
            successThreshold: 1
            tcpSocket:
              port: 6379
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 125m
              memory: 256Mi
            requests:
              cpu: 70m
              memory: 200Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
          volumeMounts:
          - mountPath: /data
            name: redis-data
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        terminationGracePeriodSeconds: 30
        volumes:
        - emptyDir: {}
          name: redis-data
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:52Z"
      lastUpdateTime: "2024-10-03T04:35:57Z"
      message: ReplicaSet "redis-cart-7b6877694d" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:59Z"
      lastUpdateTime: "2024-10-08T16:00:59Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"redis-cart","namespace":"gallery"},"spec":{"ports":[{"name":"redis","port":6379,"targetPort":6379}],"selector":{"app":"redis-cart"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:52Z"
    name: redis-cart
    namespace: gallery
    resourceVersion: "368223"
    uid: d0363c87-069e-409e-b0ac-7b11f57136bb
  spec:
    clusterIP: 172.30.217.5
    clusterIPs:
    - 172.30.217.5
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: redis
      port: 6379
      protocol: TCP
      targetPort: 6379
    selector:
      app: redis-cart
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: apps/v1
  kind: Deployment
  metadata:
    annotations:
      deployment.kubernetes.io/revision: "1"
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"name":"shippingservice","namespace":"gallery"},"spec":{"selector":{"matchLabels":{"app":"shippingservice"}},"template":{"metadata":{"annotations":{"sidecar.istio.io/inject":"true"},"labels":{"app":"shippingservice"}},"spec":{"containers":[{"env":[{"name":"PORT","value":"50051"},{"name":"DISABLE_PROFILER","value":"1"},{"name":"JAEGER_SERVICE_ADDR","value":"jaeger-collector:14268"}],"image":"quay.io/linuxeroagrio/shippingservice:latest","livenessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:50051"]}},"name":"server","ports":[{"containerPort":50051},{"containerPort":9393}],"readinessProbe":{"exec":{"command":["/bin/grpc_health_probe","-addr=:50051"]},"periodSeconds":5},"resources":{"limits":{"cpu":"200m","memory":"128Mi"},"requests":{"cpu":"100m","memory":"64Mi"}}}],"serviceAccountName":"default"}}}}
    creationTimestamp: "2024-10-03T04:35:52Z"
    generation: 1
    name: shippingservice
    namespace: gallery
    resourceVersion: "1085958"
    uid: 530fb26d-273d-49f0-bfaa-99f52c21f3e7
  spec:
    progressDeadlineSeconds: 600
    replicas: 1
    revisionHistoryLimit: 10
    selector:
      matchLabels:
        app: shippingservice
    strategy:
      rollingUpdate:
        maxSurge: 25%
        maxUnavailable: 25%
      type: RollingUpdate
    template:
      metadata:
        annotations:
          sidecar.istio.io/inject: "true"
        creationTimestamp: null
        labels:
          app: shippingservice
      spec:
        containers:
        - env:
          - name: PORT
            value: "50051"
          - name: DISABLE_PROFILER
            value: "1"
          - name: JAEGER_SERVICE_ADDR
            value: jaeger-collector:14268
          image: quay.io/linuxeroagrio/shippingservice:latest
          imagePullPolicy: Always
          livenessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:50051
            failureThreshold: 3
            periodSeconds: 10
            successThreshold: 1
            timeoutSeconds: 1
          name: server
          ports:
          - containerPort: 50051
            protocol: TCP
          - containerPort: 9393
            protocol: TCP
          readinessProbe:
            exec:
              command:
              - /bin/grpc_health_probe
              - -addr=:50051
            failureThreshold: 3
            periodSeconds: 5
            successThreshold: 1
            timeoutSeconds: 1
          resources:
            limits:
              cpu: 200m
              memory: 128Mi
            requests:
              cpu: 100m
              memory: 64Mi
          terminationMessagePath: /dev/termination-log
          terminationMessagePolicy: File
        dnsPolicy: ClusterFirst
        restartPolicy: Always
        schedulerName: default-scheduler
        securityContext: {}
        serviceAccount: default
        serviceAccountName: default
        terminationGracePeriodSeconds: 30
  status:
    availableReplicas: 1
    conditions:
    - lastTransitionTime: "2024-10-03T04:35:53Z"
      lastUpdateTime: "2024-10-03T04:35:56Z"
      message: ReplicaSet "shippingservice-56d8b5c8bb" has successfully progressed.
      reason: NewReplicaSetAvailable
      status: "True"
      type: Progressing
    - lastTransitionTime: "2024-10-08T16:00:58Z"
      lastUpdateTime: "2024-10-08T16:00:58Z"
      message: Deployment has minimum availability.
      reason: MinimumReplicasAvailable
      status: "True"
      type: Available
    observedGeneration: 1
    readyReplicas: 1
    replicas: 1
    updatedReplicas: 1
- apiVersion: v1
  kind: Service
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"app":"shippingservice"},"name":"shippingservice","namespace":"gallery"},"spec":{"ports":[{"name":"grpc","port":50051,"targetPort":50051},{"name":"metrics","port":9393}],"selector":{"app":"shippingservice"},"type":"ClusterIP"}}
    creationTimestamp: "2024-10-03T04:35:53Z"
    labels:
      app: shippingservice
    name: shippingservice
    namespace: gallery
    resourceVersion: "368260"
    uid: 9518502b-27a1-4ccc-9d45-0ce4a05899ec
  spec:
    clusterIP: 172.30.25.68
    clusterIPs:
    - 172.30.25.68
    internalTrafficPolicy: Cluster
    ipFamilies:
    - IPv4
    ipFamilyPolicy: SingleStack
    ports:
    - name: grpc
      port: 50051
      protocol: TCP
      targetPort: 50051
    - name: metrics
      port: 9393
      protocol: TCP
      targetPort: 9393
    selector:
      app: shippingservice
    sessionAffinity: None
    type: ClusterIP
  status:
    loadBalancer: {}
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    annotations:
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"monitoring.coreos.com/v1","kind":"ServiceMonitor","metadata":{"annotations":{},"name":"shippingservice","namespace":"gallery"},"spec":{"endpoints":[{"interval":"30s","port":"metrics","scheme":"http"}],"selector":{"matchLabels":{"app":"shippingservice"}}}}
    creationTimestamp: "2024-10-03T04:35:53Z"
    generation: 1
    name: shippingservice
    namespace: gallery
    resourceVersion: "368267"
    uid: 48a87a1b-8a6a-464d-b4e1-190aa6eb5819
  spec:
    endpoints:
    - interval: 30s
      port: metrics
      scheme: http
    selector:
      matchLabels:
        app: shippingservice
kind: List
metadata: {}
